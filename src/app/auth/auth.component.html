<section class="vh-100">
  <div class="container py-5 h-100">
    <div class="row d-flex align-items-center justify-content-center h-100">
      <div class="col-md-8 col-lg-7 col-xl-6">
        <img src="./assets/images/auth.png" class="img-fluid" alt="Phone image">
      </div>


      <div class="col-md-7 col-lg-5 col-xl-5 offset-xl-1">
        <h1 class="brand">Welcome to StoreUp</h1>
        <div class="brand-divider divider d-flex align-items-center my-4">

        </div>
        <form [formGroup] = "authenticationForm" *ngIf = "!showRegister">

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Email</label>
            <input
            type="text"
            class="form-control form-control-lg"
            [ngClass]="{'invalid-control': authenticationControls.email.invalid && authenticationControls.email.touched}"
            formControlName = "email"
            autocomplete="off"
            name = "userName"
            />
            <div class="invalid-detail" *ngIf="authenticationControls.email.invalid && authenticationControls.email.touched">
              Enter a valid email address.
            </div>

          </div>

          <div class="form-outline mb-4" >
            <label class="form-label" for="form1Example23">Password</label>
            <div class="toolbar">
              <input
              [ngClass]="{'invalid-control': authenticationControls.password.invalid && authenticationControls.password.touched}"
              type="{{ showPasswordForLogin ? 'text' : 'password' }}"
              class="form-control form-control-lg"
              formControlName = "password"
              autocomplete="off"
              name = "password"
              />
              <mat-icon *ngIf="!showPasswordForLogin" (click)="toggleShowPasswordForLogin()"><span class="material-icons-outlined">
              visibility_off
              </span></mat-icon>
              <mat-icon *ngIf="showPasswordForLogin" (click)="toggleShowPasswordForLogin()"><span class="material-icons-outlined">
              visibility
              </span></mat-icon>
            </div>
            <div class="invalid-detail" *ngIf="authenticationControls.password.invalid && authenticationControls.password.touched">
              Enter a valid password.
            </div>
          </div>

          <div
          class="d-flex justify-content-around align-items-center mb-4">

            <a class="cursor-pointer" (click)="onForgotPassword()">Forgot password?</a>
          </div>
        </form>

        <!-- register form -->

        <form [formGroup] = "signUpForm1" *ngIf = "showRegister && showRegister1">

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Your Name</label>
            <input
            type="text"
            [ngClass]="{'invalid-control': register1Controls.name.invalid && register1Controls.name.touched}"
            class="form-control form-control-lg"
            formControlName = "name"
            autocomplete="off"
            name = "name"
            />
            <div class="invalid-detail" *ngIf="register1Controls.name.invalid && register1Controls.name.touched">
              Enter a valid name.
            </div>
          </div>

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Store Name</label>
            <input
            [ngClass]="{'invalid-control': register1Controls.storeName.invalid && register1Controls.storeName.touched}"
            type="text"
            autocomplete="off"
            class="form-control form-control-lg"
            formControlName = "storeName"
            name = "store_name"
            />
            <div class="invalid-detail" *ngIf="register1Controls.storeName.invalid && register1Controls.storeName.touched">
              Enter a valid store name.
            </div>
          </div>

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Mobile Number</label>
            <input
            [ngClass]="{'invalid-control': register1Controls.mobileNumber.invalid && register1Controls.mobileNumber.touched}"
            type="tel"
            autocomplete="off"
            class="form-control form-control-lg"
            formControlName = "mobileNumber"
            name = "mobile_number"
            />
            <div class="invalid-detail" *ngIf="register1Controls.mobileNumber.invalid && register1Controls.mobileNumber.touched">
              Enter a valid mobile number.
            </div>
          </div>

          <!-- <div
          class="d-flex justify-content-around align-items-center mb-4">

            <a href="#!">Forgot password?</a>
          </div> -->
        </form>

        <form [formGroup] = "signUpForm2" *ngIf = "showRegister && showRegister2">

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Email</label>
            <input
            [ngClass]="{'invalid-control': register2Controls.email.invalid && register2Controls.email.touched}"
            type="text"
            class="form-control form-control-lg"
            formControlName = "email"
            name = "Name"
            autocomplete="off"
            />
            <div class="invalid-detail" *ngIf="register2Controls.email.invalid && register2Controls.email.touched">
              Enter a valid email.
            </div>
          </div>

          <div class="form-outline mb-4" >
            <label class="form-label" for="form1Example23">Password</label>
            <div class="toolbar">
              <input
              [ngClass]="{'invalid-control': register2Controls.password.invalid && register2Controls.password.touched}"
              type="{{showPasswordForRegister ? 'text' : 'password'}}"
              class="form-control form-control-lg"
              formControlName = "password"
              name = "password"
              autocomplete="off"
              />
              <mat-icon *ngIf="!showPasswordForRegister" (click)="toggleShowPasswordForRegister()"><span class="material-icons-outlined">
              visibility_off
              </span></mat-icon>
              <mat-icon *ngIf="showPasswordForRegister" (click)="toggleShowPasswordForRegister()"><span class="material-icons-outlined">
              visibility
              </span></mat-icon>
            </div>
            <div class="invalid-detail" *ngIf="register2Controls.password.invalid && register2Controls.password.touched">
              Password must be 8 characters long.
            </div>
          </div>

          <div class="form-outline mb-4" >
            <label class="form-label" for="form1Example23">Confirm Password</label>
            <input
            [ngClass]="{'invalid-control': register2Controls.confirmPassword.invalid && register2Controls.confirmPassword.touched}"
            type="text"
            class="form-control form-control-lg"
            formControlName = "confirmPassword"
            autocomplete="off"
            name = "confirm_password"
            />
            <div class="invalid-detail" *ngIf="register2Controls.confirmPassword.invalid && !register2Controls.confirmPassword.errors.required && register2Controls.confirmPassword.touched">
              Password and confirm password must match.
            </div>
            <div class="invalid-detail" *ngIf="register2Controls.confirmPassword.invalid && register2Controls.confirmPassword.errors.required && register2Controls.confirmPassword.touched">
              This field is required.
            </div>
          </div>

          <!-- <div
          class="d-flex justify-content-around align-items-center mb-4">

            <a href="#!">Forgot password?</a>
          </div> -->
        </form>
        <form [formGroup] = "signUpForm3" *ngIf = "showRegister && showRegister3">

          <div class="form-outline mb-4">
            <label class="form-label" for="form1Example13">Enter 6 digit OTP</label>
            <input
            [ngClass]="{'invalid-control': register3Controls.otp.invalid && register3Controls.otp.touched}"
            type="text"
            class="form-control form-control-lg"
            formControlName = "otp"
            name = "Name"
            autocomplete="off"
            />
            <div class="invalid-detail" *ngIf="register3Controls.otp.invalid && register3Controls.otp.touched">
              OTP must be of six digits.
            </div>
          </div>

          <div class="otp-down">

            <a class="cursor-pointer" (click)="changeEmail()">Change Email?</a>
            <a class="cursor-pointer" *ngIf="resendOtpCounter !== 0">Resend OTP in {{resendOtpCounter}} seconds</a>
            <a class="cursor-pointer" *ngIf="resendOtpCounter === 0" (click)="onResendOTP()">Resend OTP</a>
          </div>


        </form>

          <!-- Submit button -->
          <div class="d-grid gap-2">
          <button
          class="btn btn-primary btn-lg btn-block"
          *ngIf = "!showRegister"
          [disabled] = "!authenticationForm.valid"
          (click) = "verifyLogin()"
          >Log In</button>
          <button
          class="btn btn-primary btn-lg btn-block"
          *ngIf = "showRegister && showRegister1"
          [disabled] = "!signUpForm1.valid"
          (click)="onNext()"
          >Next</button>
          <button
          class="btn btn-primary btn-lg btn-block"
          *ngIf = "showRegister && showRegister2"
          [disabled] = "!signUpForm2.valid"
          (click)="onSendOtp()"
          >Send OTP to Email</button>
          <button
          class="btn btn-primary btn-lg btn-block"
          *ngIf = "showRegister && showRegister3"
          [disabled] = "!signUpForm3.valid"
          (click)="onVerifyOtp()"
          >Sign Up</button>

          <div class="divider d-flex align-items-center my-4">
            <p class="text-center fw-bold mx-3 mb-0 text-muted">OR</p>
          </div>
          <button
          class="btn btn-primary btn-lg btn-block"
          (click) = "switchMode()">{{ showRegister ? 'Log In' : 'Sign Up' }}</button>
          <!-- <a class="btn btn-primary btn-lg btn-block" style="background-color: #3b5998" href="#!" role="button">
            <i class="fab fa-facebook-f me-2"></i>Continue with Facebook
          </a>
          <a class="btn btn-primary btn-lg btn-block" style="background-color: #55acee" href="#!" role="button">
            <i class="fab fa-twitter me-2"></i>Continue with Twitter</a> -->
          </div>

      </div>
    </div>
  </div>
</section>
